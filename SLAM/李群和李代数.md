# 李群和李代数

前面我们介绍了若干种描述三维世界刚体运动的方式。除了用它们来描述相机的位姿之外，还要对它们进行**估计**和**优化**。这个问题可以描述为**什么样的相机位姿最符合当前观测数据**。而典型的做法就是将其构建成一个优化问题来求解。

前面我们介绍了旋转矩阵、旋转向量和四元数等等。而李群和李代数又是什么，我们为什么需要它们？这个问题我们过一会解答，先来看看李群和李代数。

## 李群

上一讲在介绍旋转矩阵和变换矩阵时，我们说三维旋转矩阵构成了*特殊正交群* SO(3)，变换矩阵构成了*特殊欧式群* SE(3)。我们知道，矩阵**对于乘法是封闭**的，即假设相机进行了两次连续的旋转，旋转矩阵分别为$\mathbf{R}_1$ 和$\mathbf{R}_2$, 这两个矩阵相乘后得到的也是个旋转矩阵，表示了总的旋转。也即：
$$
\forall \mathbf{R}_1,\mathbf{R}_2 \in SO(3),\  \mathbf{R}_1\mathbf{R}_2 \in SO(3)
$$
对变换矩阵也是如此。但这二者**对于加法是不封闭的**。两个变换矩阵相加后得到的矩阵并不是一个变换矩阵。

### 群

如此，我们就可以引出群的**定义**：群（group）是**一种集合加上一种运算**的**代数结构**。把集合记为$\mathbf{A}$，运算记为$\cdot$, **群就可以记为**$\mathbf{G}=(\mathbf{A},\ \cdot)$。而这个运算必须满足以下条件：

1. 封闭性：$\forall a_1,a_2 \in \mathbf{A},\  a_1 \cdot a_2 \in \mathbf{A}$
2. 结合律：$\forall a_1,a_2,a_3 \in \mathbf{A},\  (a_1 \cdot a_2) \cdot a_3 = a_1\cdot (a_2 \cdot a_3)$
3. 幺元：$\exists a_0 in \mathbf{A},\  s.t. \  \forall a \in \mathbf{A}, a_0 \cdot a = a \cdot a_0$
4. 逆：$\forall a \in \mathbf{A},\exists a^{-1} \in A, \  s.t.\  a \cdot a^{-1}=a_0$

可以验证，旋转矩阵集合和变换矩阵集合分别和矩阵乘法构成群。还有其他很多群，如整数的加法等。**群结构保证了在群上的运算具有良好的性质**。

### 李群

**定义**：*李群*就是具有**连续（光滑）**性质的群。前面举的整数的加法的例子显然不是连续的，因而它不是李群。但SO(3) 和SE(3) 在实数空间上是**连续**的（机器人在三维空间中显然是连续地运动，而不会进行“瞬移”）。

介绍完李群，在引入李代数之前，我们来回顾下开头我们提到的问题：为什么要用到李群和李代数？避免一直是数学上的推到。我们用一个比较实际的例子。假设某个时刻我们预测机器人的位姿为$\mathbf{T}$（待定值）, 它观测到了一个惯性坐标系下的点$\mathbf{p}$ 而产生了一个观测数据$\mathbf{z}$，它是该点在相机坐标系下的坐标，则可得
$$
\mathbf{z}=\mathbf{T}\mathbf{p}+\mathbf{\omega}
$$
其中，$\mathbf{\omega}$ 是观测噪声。由于观测噪声的存在，$\mathbf{z}$ 无法严格满足式$\mathbf{z}=\mathbf{T}\mathbf{p}$。因此而产生的误差$\mathbf{e}$ 为
$$
\mathbf{e}=\mathbf{z}-\mathbf{Tp}
$$
若共有N 个观测值，那么就有N 个这样的式子。机器人的位姿估计就转变成寻找一个最优的$\mathbf{T}$ 使得整体的误差最小化：
$$
\mathop{\min}_{T} J(\mathbf{T})=\sum\limits^N_{i=1}||\mathbf{z}_i-\mathbf{T}\mathbf{p}_i||^2_2
$$
通常，直接求解上式得出最优的$\mathbf{T}$是很困难的（或计算量很大）。我们常常先给定一个猜测值（初始值）$\mathbf{T}_0$，然后不断地对它进行迭代更新。而这个过程需要用到导数（可以想想梯度下降法）。回顾导数的定义，$\dot{f(x)}=\lim_{\Delta x \to 0} \frac{f(x+\Delta x)}{\Delta x}$。显然计算导数和进行更新时都要用到加法。但SO(3) 和SE(3) 上对矩阵加法的运算并不封闭。如果要继续采取这个迭代更新的策略势必要再想想办法，使得导数“可行”。而这就可以通过李群及其对应的李代数来实现。